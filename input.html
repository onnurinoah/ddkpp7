<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DJ예찬 - 시청자 참여</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, onValue, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // Firebase 설정 (자신의 설정값으로 교체)
   const firebaseConfig = {
  apiKey: "AIzaSyA4f6lYwTUK8PxjnKb-jEXOXwWgj0KJdxo",
  authDomain: "ddkpp7.firebaseapp.com",
  projectId: "ddkpp7",
  storageBucket: "ddkpp7.firebasestorage.app",
  messagingSenderId: "710654878188",
  appId: "1:710654878188:web:125f72d75677dc8ac820c9",
  measurementId: "G-ZLJVX995JC"
};

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // 투표 함수
        window.vote = (type) => {
            const voteRef = ref(db, `votes/${type}`);
            onValue(voteRef, (snapshot) => {
                const current = snapshot.val() || 0;
                set(ref(db, `votes/${type}`), current + 1);
            }, { onlyOnce: true });
            alert(type.toUpperCase() + "에 투표했습니다!");
        };

        // 댓글 전송
        window.submitComment = () => {
            const nickname = document.getElementById('nickname').value;
            const text = document.getElementById('comment-input').value;
            if(!nickname || !text) return alert("닉네임과 내용을 입력해주세요!");
            
            push(ref(db, 'comments'), { nickname, text, time: Date.now() });
            document.getElementById('comment-input').value = '';
            alert("댓글이 전송되었습니다.");
        };
    </script>
</head>
<body class="bg-green-50 flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-sm bg-white p-8 rounded-3xl shadow-lg border-2 border-green-200">
        <h1 class="text-2xl font-bold text-center text-green-700 mb-6">DJ 예찬 소통방</h1>
        
        <div class="flex gap-4 mb-8">
            <button onclick="vote('o')" class="flex-1 bg-blue-500 text-white py-6 rounded-2xl text-4xl font-black shadow-md active:scale-95 transition">O</button>
            <button onclick="vote('x')" class="flex-1 bg-red-500 text-white py-6 rounded-2xl text-4xl font-black shadow-md active:scale-95 transition">X</button>
        </div>

        <div class="space-y-3">
            <input id="nickname" type="text" placeholder="닉네임" class="w-full border-2 border-gray-200 p-3 rounded-xl focus:border-green-500 outline-none">
            <textarea id="comment-input" rows="3" placeholder="DJ에게 한마디!" class="w-full border-2 border-gray-200 p-3 rounded-xl focus:border-green-500 outline-none"></textarea>
            <button onclick="submitComment()" class="w-full bg-green-600 text-white py-3 rounded-xl font-bold text-lg hover:bg-green-700">전송하기</button>
        </div>
    </div>
</body>
</html>
